{% extends "base.html.twig" %}
{% block header %}
{{ include('_navigation.html.twig') }}
{% endblock %}

{% block content %}
{#<pre>
    {{ dump(flights) }}
</pre>#}
<section class="container bg-white mt-2 pt-5">
    <div class="row justify-content-center mb-4">
        <h2 class=" w-25">Recherche de vol</h2>
    </div>
    
</section>

<section class="container bg-white rounded mt-4 p-4">
    <div class="row">
        <div class="col-12 p-4">
           
           
            <h3>Vos résultats pour un voyage le {{ flightDatas.flightDate | date("d/m/Y")}} de {{ flightDatas.departureCity }} vers {{ flightDatas.arrivalCity }} </h3>
        
                
           
            
            
        </div>
        {% if flights %}
        {% for flight in flights %}
        <div class="col-6">
            <div class="card m-2 p-3">
                <div class="card-body">
                    <h5 class="card-title">VOL {{ flight.departure.iataCode | upper }} - {{ flight.arrival.iataCode | upper }} </h5>
                    <p><span>Décollage: {{ flight.departure.scheduledTime}}</span> <span>terminal: {{flight.departure.terminal | upper}}</span></p>
                    
                    <p><span>Aterrissage: {{ flight.arrival.scheduledTime}}</span> <span>terminal: {#{{flight.arrival.terminal | upper}}#}</span></p>
                    <p class="card-text">
                        <span>Compagnie aérienne: {% if flight.airline.name %} {{ flight.airline.name | upper}} {% else %}
                           <span>Unknown</span>  {% endif %} </span>
                        
                    </p>
                    <p><span>Numéro de vol: {{ flight.flight.iataNumber | upper }}</span></p>
                </div>
               {#<a href="{{ path('comment_new', {'pseudo' : app.user.firstName, 'flightNumber': flight.flight.iataNumber})}}" class="btn btn-outline-dark  mx-1">Ecrire un avis</a>#} 

           
  <!-- Button trigger modal -->
<button type="button" class="btn btn-outline-dark" data-toggle="modal" data-target="#myModal">
  Donnez votre avis
</button>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Rédigez votre avis</h5>
        <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        {% include "./comment/_form.html.twig" %}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

  
            </div>
        </div>
        
        
        
        {% endfor %}
          
        {% else %}
        <p class="resultSearchMessage">Il n'y a pas de résultat pour votre recherche</p>
        {% endif %}
    </div>
    {% if comments %}
      {% for comment in comments %}
        <p>{{comment.comment}}</p>
      {% endfor %}
    {% endif %}
</section>
{% endblock %}


